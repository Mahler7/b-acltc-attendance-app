<div id="attendances">

  <h1>Lecture Profile</h1>
  <h3><%= @lecture.name %></h3>
  <p>Start Time: <%= @lecture.friendly_start_time %></p>
  <p>End Time: <%= @lecture.friendly_end_time %></p>
  <p>Notes: <%= @lecture.notes %></p>
  
  <input type="hidden" v-model="lecture_id" value="<%= @lecture.id %>"/>
  <% unless @lecture.students.include?(current_student) || current_teacher %>
    <div class="attendances-checkbox">
      <label class="student-attendance-checkbox">Attended</label>
      <input type="checkbox" v-model="attendance.attended"></input>
      <input type="hidden" v-model="attendance.lecture_id" value="<%= @lecture.id %>">
      <input type="hidden" v-model="attendance.student_id" value="<%= @current_student_id %>">
      <button v-on:click="addAttendance">Attended</button>
    </div>
  <% end %>

  <div>
    <% if current_student %>
      <%= link_to "Back", "/students", class: "btn btn-default" %>
    <% elsif current_teacher %>
      <%= link_to "Back", "/cohorts/#{@lecture.cohort_id}", class: "btn btn-default" %>
      <%= link_to "New Attendance", "/lectures/#{@lecture.id}/attendances/new", class: "btn btn-default" %>
      <%= link_to "Edit Lecture", "/lectures/#{@lecture.id}/edit", class: "btn btn-default" %>
      <%= link_to "Delete Lecture", "/lectures/#{@lecture.id}", method: :delete, data:{confirm: "Are you sure you want to delete this lecture?"}, class: "btn btn-default" %>
    <% end %>
  </div>

  <table>
    <thead>
      <tr>
        <th>Student Name</th>
        <th>Student Arrived</th>
        <th>Attendance Status</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr v-for="attendance in attendances" v-show="attendance.attended" id="students-attended-list">
        <td>{{ attendance.student_name }}</td>
        <td>{{ attendance.display_time }}</td>
        <td>{{ attendance.lecture_attendance }}</td>
        <% if current_teacher %>
          <td><td><button type="button" class="btn btn-default btn-xs"><%= link_to "Edit", "/lectures/{{ attendance.lecture_id }}/attendances/{{attendance.id}}/edit" %></button></td>
          <td><button type="button" class="btn btn-default btn-xs" v-on:click="deleteAttendance(attendance)">Delete</button></td>
        <% end %>
      </tr>
    </tbody>
  </table>
</div>